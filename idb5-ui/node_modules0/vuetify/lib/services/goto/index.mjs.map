{"version":3,"sources":["../../../src/services/goto/index.ts"],"names":["Service","easingPatterns","getContainer","getOffset","goTo","_target","_settings","settings","container","document","scrollingElement","body","documentElement","duration","offset","easing","appOffset","framework","application","isDrawer","classList","contains","isClipped","bar","top","startTime","performance","now","targetLocation","startLocation","scrollTop","Promise","resolve","ease","TypeError","requestAnimationFrame","step","currentTime","timeElapsed","progress","Math","abs","min","floor","clientHeight","reachBottom","scrollHeight","Goto","constructor"],"mappings":"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","sourcesContent":["// @ts-nocheck\n/* eslint-disable */\n\n// Extensions\nimport { Service } from '../service'\n\n// Utilities\nimport * as easingPatterns from './easing-patterns'\nimport {\n  getContainer,\n  getOffset,\n} from './util'\n\n// Types\nimport { GoToOptions, VuetifyGoToTarget } from 'vuetify/types/services/goto'\n\nimport { VuetifyServiceContract } from 'vuetify/types/services'\n\nfunction goTo (\n  _target: VuetifyGoToTarget,\n  _settings: GoToOptions = {}\n): Promise<number> {\n  const settings: GoToOptions = {\n    container: (document.scrollingElement as HTMLElement | null) || document.body || document.documentElement,\n    duration: 500,\n    offset: 0,\n    easing: 'easeInOutCubic',\n    appOffset: true,\n    ..._settings,\n  }\n  const container = getContainer(settings.container)\n\n  /* istanbul ignore else */\n  if (settings.appOffset && goTo.framework.application) {\n    const isDrawer = container.classList.contains('v-navigation-drawer')\n    const isClipped = container.classList.contains('v-navigation-drawer--clipped')\n    const { bar, top } = goTo.framework.application as any\n\n    settings.offset += bar\n    /* istanbul ignore else */\n    if (!isDrawer || isClipped) settings.offset += top\n  }\n\n  const startTime = performance.now()\n\n  let targetLocation: number\n  if (typeof _target === 'number') {\n    targetLocation = getOffset(_target) - settings.offset!\n  } else {\n    targetLocation = getOffset(_target) - getOffset(container) - settings.offset!\n  }\n\n  const startLocation = container.scrollTop\n  if (targetLocation === startLocation) return Promise.resolve(targetLocation)\n\n  const ease = typeof settings.easing === 'function'\n    ? settings.easing\n    : easingPatterns[settings.easing!]\n  /* istanbul ignore else */\n  if (!ease) throw new TypeError(`Easing function \"${settings.easing}\" not found.`)\n\n  // Cannot be tested properly in jsdom\n  /* istanbul ignore next */\n  return new Promise(resolve => requestAnimationFrame(function step (currentTime: number) {\n    const timeElapsed = currentTime - startTime\n    const progress = Math.abs(settings.duration ? Math.min(timeElapsed / settings.duration, 1) : 1)\n\n    container.scrollTop = Math.floor(startLocation + (targetLocation - startLocation) * ease(progress))\n\n    const clientHeight = container === document.body ? document.documentElement.clientHeight : container.clientHeight\n    const reachBottom = clientHeight + container.scrollTop >= container.scrollHeight\n    if (\n      progress === 1 ||\n      // Need to go lower but reach bottom\n      (targetLocation > container.scrollTop && reachBottom)\n    ) {\n      return resolve(targetLocation)\n    }\n\n    requestAnimationFrame(step)\n  }))\n}\n\ngoTo.framework = {} as Record<string, VuetifyServiceContract>\n\nexport class Goto extends Service {\n  public static property: 'goTo' = 'goTo'\n\n  constructor () {\n    super()\n\n    return goTo\n  }\n}\n"],"file":"index.mjs"}