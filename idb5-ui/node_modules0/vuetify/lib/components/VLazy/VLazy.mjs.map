{"version":3,"sources":["../../../src/components/VLazy/VLazy.tsx"],"names":["makeDimensionProps","useDimension","makeTagProps","makeTransitionProps","MaybeTransition","useProxiedModel","intersect","defineComponent","VLazy","name","directives","props","modelValue","Boolean","options","type","Object","default","root","undefined","rootMargin","threshold","transition","emits","value","setup","slots","dimensionStyles","isActive","onIntersect","isIntersecting"],"mappings":";AAAA;SACSA,kB,EAAoBC,Y;SACpBC,Y;SACAC,mB,EAAqBC,e;SACrBC,e,8CAET;;OACOC,S,8CAEP;;SAESC,e;AAET,OAAO,MAAMC,KAAK,GAAGD,eAAe,CAAC;AACnCE,EAAAA,IAAI,EAAE,OAD6B;AAGnCC,EAAAA,UAAU,EAAE;AAAEJ,IAAAA;AAAF,GAHuB;AAKnCK,EAAAA,KAAK,EAAE;AACLC,IAAAA,UAAU,EAAEC,OADP;AAELC,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAEC,MADC;AAEP;AACA;AACAC,MAAAA,OAAO,EAAE,OAAO;AACdC,QAAAA,IAAI,EAAEC,SADQ;AAEdC,QAAAA,UAAU,EAAED,SAFE;AAGdE,QAAAA,SAAS,EAAEF;AAHG,OAAP;AAJF,KAFJ;AAaL,OAAGnB,kBAAkB,EAbhB;AAcL,OAAGE,YAAY,EAdV;AAeL,OAAGC,mBAAmB,CAAC;AAAEmB,MAAAA,UAAU,EAAE;AAAd,KAAD;AAfjB,GAL4B;AAuBnCC,EAAAA,KAAK,EAAE;AACL,yBAAsBC,KAAD,IAAoB;AADpC,GAvB4B;;AA2BnCC,EAAAA,KAAK,CAAEd,KAAF,QAAoB;AAAA,QAAX;AAAEe,MAAAA;AAAF,KAAW;AACvB,UAAM;AAAEC,MAAAA;AAAF,QAAsB1B,YAAY,CAACU,KAAD,CAAxC;AACA,UAAMiB,QAAQ,GAAGvB,eAAe,CAACM,KAAD,EAAQ,YAAR,CAAhC;;AAEA,aAASkB,WAAT,CAAsBC,cAAtB,EAA+C;AAC7C,UAAIF,QAAQ,CAACJ,KAAb,EAAoB;AAEpBI,MAAAA,QAAQ,CAACJ,KAAT,GAAiBM,cAAjB;AACD;;AAED,WAAO;AAAA;;AAAA;AAAA,iBAEG,QAFH;AAAA,iBAQKH,eAAe,CAACH;AARrB;AAAA,wBAUDI,QAAQ,CAACJ,KAAT;AAAA,wBAC8Bb,KAAK,CAACW;AADpC;AAAA,4CAEII,KAAK,CAACT,OAFV,qBAEI,oBAAAS,KAAK,CAFT;AAAA,6BAVC;AAAA,0DAIDG,WAJC,EAKDlB,KAAK,CAACG,OALL;AAAA,KAAP;AAiBD;;AAtDkC,CAAD,CAA7B","sourcesContent":["// Composables\nimport { makeDimensionProps, useDimension } from '@/composables/dimensions'\nimport { makeTagProps } from '@/composables/tag'\nimport { makeTransitionProps, MaybeTransition } from '@/composables/transition'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Directives\nimport intersect from '@/directives/intersect'\n\n// Utilities\nimport type { PropType } from 'vue'\nimport { defineComponent } from '@/util'\n\nexport const VLazy = defineComponent({\n  name: 'VLazy',\n\n  directives: { intersect },\n\n  props: {\n    modelValue: Boolean,\n    options: {\n      type: Object as PropType<IntersectionObserverInit>,\n      // For more information on types, navigate to:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n      default: () => ({\n        root: undefined,\n        rootMargin: undefined,\n        threshold: undefined,\n      }),\n    },\n\n    ...makeDimensionProps(),\n    ...makeTagProps(),\n    ...makeTransitionProps({ transition: 'fade-transition' }),\n  },\n\n  emits: {\n    'update:modelValue': (value: boolean) => true,\n  },\n\n  setup (props, { slots }) {\n    const { dimensionStyles } = useDimension(props)\n    const isActive = useProxiedModel(props, 'modelValue')\n\n    function onIntersect (isIntersecting: boolean) {\n      if (isActive.value) return\n\n      isActive.value = isIntersecting\n    }\n\n    return () => (\n      <props.tag\n        class=\"v-lazy\"\n        v-intersect={[\n          onIntersect,\n          props.options,\n          isActive.value ? [] : ['once'],\n        ]}\n        style={ dimensionStyles.value }\n      >\n        { isActive.value && (\n          <MaybeTransition transition={ props.transition }>\n            { slots.default?.() }\n          </MaybeTransition>\n        )}\n      </props.tag>\n    )\n  },\n})\n"],"file":"VLazy.mjs"}