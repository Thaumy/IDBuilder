{"version":3,"sources":["../../../src/components/VOverlay/requestNewFrame.ts"],"names":["clean","frames","requestNewFrame","cb","length","push","run","raf","cancelAnimationFrame","requestAnimationFrame","frame","shift"],"mappings":"AAAA,IAAIA,KAAK,GAAG,IAAZ;AACA,MAAMC,MAAM,GAAG,EAAf;AAEA;AACA;AACA;AACA;;AACA,OAAO,SAASC,eAAT,CAA0BC,EAA1B,EAA0C;AAC/C,MAAI,CAACH,KAAD,IAAUC,MAAM,CAACG,MAArB,EAA6B;AAC3BH,IAAAA,MAAM,CAACI,IAAP,CAAYF,EAAZ;AACAG,IAAAA,GAAG;AACJ,GAHD,MAGO;AACLN,IAAAA,KAAK,GAAG,KAAR;AACAG,IAAAA,EAAE;AACFG,IAAAA,GAAG;AACJ;AACF;AAED,IAAIC,GAAG,GAAG,CAAC,CAAX;;AACA,SAASD,GAAT,GAAgB;AACdE,EAAAA,oBAAoB,CAACD,GAAD,CAApB;AACAA,EAAAA,GAAG,GAAGE,qBAAqB,CAAC,MAAM;AAChC,UAAMC,KAAK,GAAGT,MAAM,CAACU,KAAP,EAAd;AACA,QAAID,KAAJ,EAAWA,KAAK;AAEhB,QAAIT,MAAM,CAACG,MAAX,EAAmBE,GAAG,GAAtB,KACKN,KAAK,GAAG,IAAR;AACN,GAN0B,CAA3B;AAOD","sourcesContent":["let clean = true\nconst frames = [] as any[]\n\n/**\n * Schedule a task to run in an animation frame on its own\n * This is useful for heavy tasks that may cause jank if all ran together\n */\nexport function requestNewFrame (cb: () => void) {\n  if (!clean || frames.length) {\n    frames.push(cb)\n    run()\n  } else {\n    clean = false\n    cb()\n    run()\n  }\n}\n\nlet raf = -1\nfunction run () {\n  cancelAnimationFrame(raf)\n  raf = requestAnimationFrame(() => {\n    const frame = frames.shift()\n    if (frame) frame()\n\n    if (frames.length) run()\n    else clean = true\n  })\n}\n"],"file":"requestNewFrame.mjs"}