{"version":3,"sources":["../../../src/components/transitions/dialog-transition.tsx"],"names":["Transition","acceleratedEasing","deceleratedEasing","defineComponent","nullifyTransforms","VDialogTransition","name","props","target","Object","setup","slots","functions","onBeforeEnter","el","style","pointerEvents","onEnter","done","Promise","resolve","requestAnimationFrame","x","y","getDimensions","animation","animate","transform","opacity","duration","easing","finished","then","onAfterEnter","removeProperty","onBeforeLeave","onLeave","onAfterLeave","targetBox","getBoundingClientRect","elBox","originX","originY","getComputedStyle","transformOrigin","split","map","v","parseFloat","anchorSide","anchorOffset","getPropertyValue","offsetX","left","width","offsetY","top","height"],"mappings":"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","sourcesContent":["import type { PropType } from 'vue'\nimport { Transition } from 'vue'\nimport { acceleratedEasing, deceleratedEasing, defineComponent, nullifyTransforms } from '@/util'\n\nexport const VDialogTransition = defineComponent({\n  name: 'VDialogTransition',\n\n  props: {\n    target: Object as PropType<HTMLElement>,\n  },\n\n  setup (props, { slots }) {\n    const functions = {\n      onBeforeEnter (el: Element) {\n        (el as HTMLElement).style.pointerEvents = 'none'\n      },\n      async onEnter (el: Element, done: () => void) {\n        await new Promise(resolve => requestAnimationFrame(resolve))\n\n        const { x, y } = getDimensions(props.target!, el as HTMLElement)\n\n        const animation = el.animate([\n          { transform: `translate(${x}px, ${y}px) scale(0.1)`, opacity: 0 },\n          { transform: '' },\n        ], {\n          duration: 225,\n          easing: deceleratedEasing,\n        })\n        animation.finished.then(() => done())\n      },\n      onAfterEnter (el: Element) {\n        (el as HTMLElement).style.removeProperty('pointer-events')\n      },\n      onBeforeLeave (el: Element) {\n        (el as HTMLElement).style.pointerEvents = 'none'\n      },\n      async onLeave (el: Element, done: () => void) {\n        await new Promise(resolve => requestAnimationFrame(resolve))\n\n        const { x, y } = getDimensions(props.target!, el as HTMLElement)\n\n        const animation = el.animate([\n          { transform: '' },\n          { transform: `translate(${x}px, ${y}px) scale(0.1)`, opacity: 0 },\n        ], {\n          duration: 125,\n          easing: acceleratedEasing,\n        })\n        animation.finished.then(() => done())\n      },\n      onAfterLeave (el: Element) {\n        (el as HTMLElement).style.removeProperty('pointer-events')\n      },\n    }\n\n    return () => {\n      return props.target\n        ? (\n          <Transition\n            name=\"dialog-transition\"\n            { ...functions }\n            css={ false }\n            v-slots={ slots }\n          />\n        )\n        : <Transition name=\"dialog-transition\" v-slots={ slots } />\n    }\n  },\n})\n\nfunction getDimensions (target: HTMLElement, el: HTMLElement) {\n  const targetBox = target.getBoundingClientRect()\n  const elBox = nullifyTransforms(el)\n  const [originX, originY] = getComputedStyle(el).transformOrigin.split(' ').map(v => parseFloat(v))\n\n  const [anchorSide, anchorOffset] = getComputedStyle(el).getPropertyValue('--v-overlay-anchor-origin').split(' ')\n\n  let offsetX = targetBox.left + targetBox.width / 2\n  if (anchorSide === 'left' || anchorOffset === 'left') {\n    offsetX -= targetBox.width / 2\n  } else if (anchorSide === 'right' || anchorOffset === 'right') {\n    offsetX += targetBox.width / 2\n  }\n\n  let offsetY = targetBox.top + targetBox.height / 2\n  if (anchorSide === 'top' || anchorOffset === 'top') {\n    offsetY -= targetBox.height / 2\n  } else if (anchorSide === 'bottom' || anchorOffset === 'bottom') {\n    offsetY += targetBox.height / 2\n  }\n\n  return {\n    x: offsetX - (originX + elBox.left),\n    y: offsetY - (originY + elBox.top),\n  }\n}\n"],"file":"dialog-transition.mjs"}