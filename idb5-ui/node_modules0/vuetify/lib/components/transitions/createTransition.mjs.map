{"version":3,"sources":["../../../src/components/transitions/createTransition.ts"],"names":["h","Transition","TransitionGroup","defineComponent","createCssTransition","name","origin","mode","props","group","Boolean","hideOnLeave","leaveAbsolute","type","String","default","setup","slots","tag","onBeforeEnter","el","style","transformOrigin","onLeave","offsetTop","offsetLeft","offsetWidth","offsetHeight","_transitionInitialStyles","position","top","left","width","height","setProperty","onAfterLeave","createJavascriptTransition","functions"],"mappings":"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","sourcesContent":["// Utilities\nimport { h, Transition, TransitionGroup } from 'vue'\nimport { defineComponent } from '@/util'\n\n// Types\nimport type { FunctionalComponent, Prop } from 'vue'\n\nexport function createCssTransition (\n  name: string,\n  origin = 'top center 0',\n  mode?: string\n) {\n  return defineComponent({\n    name,\n\n    props: {\n      group: Boolean,\n      hideOnLeave: Boolean,\n      leaveAbsolute: Boolean,\n      mode: {\n        type: String,\n        default: mode,\n      },\n      origin: {\n        type: String,\n        default: origin,\n      },\n    },\n\n    setup (props, { slots }) {\n      return () => {\n        const tag = props.group ? TransitionGroup : Transition\n\n        return h(tag as FunctionalComponent, {\n          name,\n          mode: props.mode,\n          onBeforeEnter (el: HTMLElement) {\n            el.style.transformOrigin = props.origin\n          },\n          onLeave (el: HTMLElement) {\n            if (props.leaveAbsolute) {\n              const { offsetTop, offsetLeft, offsetWidth, offsetHeight } = el\n              el._transitionInitialStyles = {\n                position: el.style.position,\n                top: el.style.top,\n                left: el.style.left,\n                width: el.style.width,\n                height: el.style.height,\n              }\n              el.style.position = 'absolute'\n              el.style.top = `${offsetTop}px`\n              el.style.left = `${offsetLeft}px`\n              el.style.width = `${offsetWidth}px`\n              el.style.height = `${offsetHeight}px`\n            }\n\n            if (props.hideOnLeave) {\n              el.style.setProperty('display', 'none', 'important')\n            }\n          },\n          onAfterLeave (el: HTMLElement) {\n            if (props.leaveAbsolute && el?._transitionInitialStyles) {\n              const { position, top, left, width, height } = el._transitionInitialStyles\n              delete el._transitionInitialStyles\n              el.style.position = position || ''\n              el.style.top = top || ''\n              el.style.left = left || ''\n              el.style.width = width || ''\n              el.style.height = height || ''\n            }\n          },\n        }, slots.default)\n      }\n    },\n  })\n}\n\nexport function createJavascriptTransition (\n  name: string,\n  functions: Record<string, any>,\n  mode = 'in-out'\n) {\n  return defineComponent({\n    name,\n\n    props: {\n      mode: {\n        type: String,\n        default: mode,\n      } as Prop<'in-out' | 'out-in' | 'default'>,\n    },\n\n    setup (props, { slots }) {\n      return () => {\n        return h(Transition, {\n          name,\n          // mode: props.mode, // TODO: vuejs/vue-next#3104\n          ...functions,\n        }, slots.default)\n      }\n    },\n  })\n}\n"],"file":"createTransition.mjs"}