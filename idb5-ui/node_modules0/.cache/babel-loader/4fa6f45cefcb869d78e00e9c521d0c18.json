{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\nvar fs = require('fs');\n\nvar path = require('path');\n\nvar os = require('os'); // Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\n\n\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require; // eslint-disable-line\n\nvar vars = process.config && process.config.variables || {};\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY;\nvar abi = process.versions.modules; // TODO: support old node where this is undef\n\nvar runtime = isElectron() ? 'electron' : 'node';\nvar arch = os.arch();\nvar platform = os.platform();\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc');\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || '';\nvar uv = (process.versions.uv || '').split('.')[0];\nmodule.exports = load;\n\nfunction load(dir) {\n  return runtimeRequire(load.path(dir));\n}\n\nload.path = function (dir) {\n  dir = path.resolve(dir || '.');\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_');\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD'];\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild);\n    if (release) return release;\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild);\n    if (debug) return debug;\n  }\n\n  var prebuild = resolve(dir);\n  if (prebuild) return prebuild;\n  var nearby = resolve(path.dirname(process.execPath));\n  if (nearby) return nearby;\n  var target = ['platform=' + platform, 'arch=' + arch, 'runtime=' + runtime, 'abi=' + abi, 'uv=' + uv, armv ? 'armv=' + armv : '', 'libc=' + libc, 'node=' + process.versions.node, process.versions.electron ? 'electron=' + process.versions.electron : '', typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ');\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n');\n\n  function resolve(dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple);\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0];\n    if (!tuple) return; // Find most specific flavor first\n\n    var prebuilds = path.join(dir, 'prebuilds', tuple.name);\n    var parsed = readdirSync(prebuilds).map(parseTags);\n    var candidates = parsed.filter(matchTags(runtime, abi));\n    var winner = candidates.sort(compareTags(runtime))[0];\n    if (winner) return path.join(prebuilds, winner.file);\n  }\n};\n\nfunction readdirSync(dir) {\n  try {\n    return fs.readdirSync(dir);\n  } catch (err) {\n    return [];\n  }\n}\n\nfunction getFirst(dir, filter) {\n  var files = readdirSync(dir).filter(filter);\n  return files[0] && path.join(dir, files[0]);\n}\n\nfunction matchBuild(name) {\n  return /\\.node$/.test(name);\n}\n\nfunction parseTuple(name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-');\n  if (arr.length !== 2) return;\n  var platform = arr[0];\n  var architectures = arr[1].split('+');\n  if (!platform) return;\n  if (!architectures.length) return;\n  if (!architectures.every(Boolean)) return;\n  return {\n    name,\n    platform,\n    architectures\n  };\n}\n\nfunction matchTuple(platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false;\n    if (tuple.platform !== platform) return false;\n    return tuple.architectures.includes(arch);\n  };\n}\n\nfunction compareTuples(a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length;\n}\n\nfunction parseTags(file) {\n  var arr = file.split('.');\n  var extension = arr.pop();\n  var tags = {\n    file: file,\n    specificity: 0\n  };\n  if (extension !== 'node') return;\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i];\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag;\n    } else if (tag === 'napi') {\n      tags.napi = true;\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3);\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2);\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4);\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag;\n    } else {\n      continue;\n    }\n\n    tags.specificity++;\n  }\n\n  return tags;\n}\n\nfunction matchTags(runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false;\n    if (tags.runtime !== runtime && !runtimeAgnostic(tags)) return false;\n    if (tags.abi !== abi && !tags.napi) return false;\n    if (tags.uv && tags.uv !== uv) return false;\n    if (tags.armv && tags.armv !== armv) return false;\n    if (tags.libc && tags.libc !== libc) return false;\n    return true;\n  };\n}\n\nfunction runtimeAgnostic(tags) {\n  return tags.runtime === 'node' && tags.napi;\n}\n\nfunction compareTags(runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1;\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1;\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1;\n    } else {\n      return 0;\n    }\n  };\n}\n\nfunction isElectron() {\n  if (process.versions && process.versions.electron) return true;\n  if (process.env.ELECTRON_RUN_AS_NODE) return true;\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer';\n}\n\nfunction isAlpine(platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release');\n} // Exposed for unit tests\n// TODO: move to lib\n\n\nload.parseTags = parseTags;\nload.matchTags = matchTags;\nload.compareTags = compareTags;\nload.parseTuple = parseTuple;\nload.matchTuple = matchTuple;\nload.compareTuples = compareTuples;","map":{"version":3,"sources":["/home/thaumy/Desktop/idb5-ui/node_modules/node-gyp-build/index.js"],"names":["fs","require","path","os","runtimeRequire","__webpack_require__","__non_webpack_require__","vars","process","config","variables","prebuildsOnly","env","PREBUILDS_ONLY","abi","versions","modules","runtime","isElectron","arch","platform","libc","LIBC","isAlpine","armv","ARM_VERSION","arm_version","uv","split","module","exports","load","dir","resolve","name","join","toUpperCase","replace","err","release","getFirst","matchBuild","debug","prebuild","nearby","dirname","execPath","target","node","electron","filter","Boolean","Error","tuples","readdirSync","map","parseTuple","tuple","matchTuple","sort","compareTuples","prebuilds","parsed","parseTags","candidates","matchTags","winner","compareTags","file","files","test","arr","length","architectures","every","includes","a","b","extension","pop","tags","specificity","i","tag","napi","slice","runtimeAgnostic","ELECTRON_RUN_AS_NODE","window","type","existsSync"],"mappings":"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","sourcesContent":["var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : 'node'\nvar arch = os.arch()\nvar platform = os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.path(dir))\n}\n\nload.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    process.versions.electron ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple)\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0]\n    if (!tuple) return\n\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', tuple.name)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTuple (name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-')\n  if (arr.length !== 2) return\n\n  var platform = arr[0]\n  var architectures = arr[1].split('+')\n\n  if (!platform) return\n  if (!architectures.length) return\n  if (!architectures.every(Boolean)) return\n\n  return { name, platform, architectures }\n}\n\nfunction matchTuple (platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false\n    if (tuple.platform !== platform) return false\n    return tuple.architectures.includes(arch)\n  }\n}\n\nfunction compareTuples (a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\nload.parseTuple = parseTuple\nload.matchTuple = matchTuple\nload.compareTuples = compareTuples\n"]},"metadata":{},"sourceType":"script"}